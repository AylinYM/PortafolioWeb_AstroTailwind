---
import Base from '../layouts/Base.astro';
import "../styles/proyectos.css";

const proyectos = [
  {
    id: 1,
    titulo: 'Find a Friend',
    descripcion: 'Aplicaci√≥n para adopci√≥n de perros y gatos.',
    imagen: '/img/FF.PNG',
    tecnologias: ['React', 'Node.js', 'MongoDB'],
    demoUrl: '#',
    repoUrl: '#',
    color: 'from-red-500 to-pink-500'
  },
  {
    id: 2,
    titulo: 'EpicEcho',
    descripcion: 'Aplicaci√≥n de alarma',
    imagen: '/img/EE.PNG',
    tecnologias: ['Java', 'Android', 'Firebase'],
    demoUrl: '#',
    repoUrl: '#',
    color: 'from-red-600 to-orange-500'
  },
  {
    id: 3,
    titulo: 'VocaLingo',
    descripcion: 'Aplicaci√≥n de traducci√≥n',
    imagen: '/img/VL.PNG',
    tecnologias: ['Python', 'Flask', 'API'],
    demoUrl: '#',
    repoUrl: '#',
    color: 'from-red-700 to-red-500'
  }
];
---

<Base title="Proyectos - Aylin Yap" description="Portafolio de proyectos de desarrollo de Aylin Yap">
  <!-- Hero con parallax y geometr√≠a -->
  <section class="hero-proyectos relative overflow-hidden">
    <!-- Fondo -->
    <div class="absolute inset-0 bg-gradient-to-br from-black via-gray-900 to-red-950"></div>
    
    <!-- Formas geom√©tricas -->
    <div class="geometric-shapes absolute inset-0 overflow-hidden pointer-events-none">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
      <div class="shape shape-5"></div>
    </div>

    <!-- Imagen de fondo -->
    <div class="absolute inset-0 opacity-20">
      <div class="w-full h-full bg-cover bg-center" style="background-image: url('/img/proyectos-bg.jpg')"></div>
    </div>

    <!-- Contenido -->
    <div class="relative container mx-auto px-4 py-32 text-center text-white z-10">
      <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold mb-6 animate-fade-in-down">
        Mis Proyectos
      </h1>
      <p class="text-xl md:text-2xl opacity-90 animate-fade-in-up animation-delay-200 max-w-3xl mx-auto">
        Algunos de los trabajos que he realizado en mi formaci√≥n y pr√°ctica.
      </p>

      <!-- Estad√≠sticas -->
      <div class="flex justify-center gap-8 md:gap-16 mt-12 animate-fade-in-up animation-delay-400">
        <div class="stat-card">
          <div class="stat-number" data-target="3">0</div>
          <div class="stat-label">Proyectos</div>
        </div>
        <div class="stat-card animation-delay-100">
          <div class="stat-number" data-target="5">0</div>
          <div class="stat-label">Tecnolog√≠as</div>
        </div>
        <div class="stat-card animation-delay-200">
          <div class="stat-number" data-target="100">0</div>
          <div class="stat-label">Horas de c√≥digo</div>
        </div>
      </div>
    </div>

    <!-- Onda -->
    <div class="absolute bottom-0 left-0 w-full overflow-hidden leading-none rotate-180">
      <svg class="relative block w-full h-20" viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" class="fill-gray-50"></path>
      </svg>
    </div>
  </section>

  <!-- Secci√≥n de proyectos -->
  <section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-4xl md:text-5xl font-bold text-center mb-4 animate-on-scroll">
        Portafolio
        <span class="block w-20 h-1 bg-red-600 mx-auto mt-4 rounded-full"></span>
      </h2>

      <!-- Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-16 max-w-7xl mx-auto">
        {proyectos.map((proyecto, index) => (
          <div 
            class="project-card animate-on-scroll"
            style={`animation-delay: ${index * 0.2}s`}
            data-project={proyecto.id}
          >
            <!-- Imagen -->
            <div class="project-image-container">
              <img src={proyecto.imagen} alt={proyecto.titulo} class="project-image" />
              <div class="project-overlay">
                <div class="overlay-content">
                  <button class="overlay-btn demo-btn" data-url={proyecto.demoUrl}>
                    üëÅ
                  </button>
                  <button class="overlay-btn code-btn" data-url={proyecto.repoUrl}>
                    üíª
                  </button>
                </div>
              </div>
              <div class={`project-badge bg-gradient-to-r ${proyecto.color}`}>{proyecto.id}</div>
            </div>

            <!-- Contenido -->
            <div class="project-content">
              <h3 class="project-title">{proyecto.titulo}</h3>
              <p class="project-description">{proyecto.descripcion}</p>
              
              <div class="project-tech">
                {proyecto.tecnologias.map(tech => (
                  <span class="tech-badge">{tech}</span>
                ))}
              </div>

              <div class="project-actions">
                <a href={proyecto.demoUrl} class="btn-project btn-demo">Ver Demo</a>
                <a href={proyecto.repoUrl} class="btn-project btn-code">C√≥digo</a>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- CTA -->
      <div class="mt-20 text-center animate-on-scroll animation-delay-600">
        <div class="max-w-3xl mx-auto bg-gradient-to-r from-red-600 to-red-700 rounded-2xl p-8 md:p-12 text-white shadow-2xl relative overflow-hidden">
          <div class="absolute inset-0 opacity-30"></div>
          <div class="relative z-10">
            <h3 class="text-3xl md:text-4xl font-bold mb-4">¬øTienes un proyecto en mente?</h3>
            <p class="text-lg md:text-xl mb-6 opacity-90">¬°Trabajemos juntos para hacerlo realidad!</p>
            <a href="/contacto" class="inline-flex items-center gap-2 bg-white text-red-600 px-8 py-4 rounded-full font-semibold hover:bg-gray-100 transition-all duration-300 hover:scale-105 shadow-lg">
              Cont√°ctame ahora ‚Üí
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Contador animado
    function animateCounter(element) {
      const target = parseInt(element.dataset.target || '0');
      const duration = 2000;
      const step = target / (duration / 16);
      let current = 0;

      const timer = setInterval(() => {
        current += step;
        if (current >= target) {
          element.textContent = target.toString();
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(current).toString();
        }
      }, 16);
    }

    // Observers
    const statObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const numbers = entry.target.querySelectorAll('.stat-number');
          numbers.forEach(num => animateCounter(num));
          statObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.5 });

    const heroSection = document.querySelector('.hero-proyectos');
    if (heroSection) statObserver.observe(heroSection);

    const scrollObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

    document.querySelectorAll('.animate-on-scroll').forEach(el => {
      scrollObserver.observe(el);
    });

    document.querySelectorAll('.overlay-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const url = btn.dataset.url;
        if (url && url !== '#') {
          window.open(url, '_blank');
        }
      });
    });
  </script>
</Base>
